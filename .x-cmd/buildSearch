# shellcheck shell=bash disable=SC1091,SC2034,SC2002 #xsh
###
  # 运行docSearch docker建立搜索索引
  # 根目录需建立.env文件：https://www.algolia.com/apps/CXZ8IP0O5G/api-keys/all
  # APPLICATION_ID=your APPLICATION_ID
  # API_KEY=your API_KEY
###
# Section: Arg
WORK_DIR="$(x wsroot)"
CONFIG_FILE=$WORK_DIR/docs/.vuepress/configs/docSearch/docSearchConfig.json
# EndSection

# Section: Main
[ ! -f "$WORK_DIR/.env" ] && printf "%s\n" "Not found env file" && return
docker run -it --env-file=.env -e "CONFIG=$(cat "${CONFIG_FILE}" | x jq -r tostring)" algolia/docsearch-scraper
# EndSection